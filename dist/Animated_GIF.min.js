!function e(t,n,r){function i(o,l){if(!n[o]){if(!t[o]){var f="function"==typeof require&&require;if(!l&&f)return f(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var s=n[o]={exports:{}};t[o][0].call(s.exports,function(e){var n=t[o][1][e];return i(n?n:e)},s,s.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t){function n(t){"use strict";function n(){if(0===A.length)throw"No workers left!";return A.pop()}function r(e){A.push(e)}function i(e){y.length;I=e;for(var t=0;d>t&&t<y.length;t++)a(t)}function a(e){var t,i;return t=y[e],t.beingProcessed||t.done?(console.error("Frame already being processed or done!",t.position),void l()):(t.sampleInterval=s,t.beingProcessed=!0,i=n(),i.onmessage=function(e){var n=e.data;delete t.data,t.pixels=Array.prototype.slice.call(n.pixels),t.palette=Array.prototype.slice.call(n.palette),t.done=!0,t.beingProcessed=!1,r(i),l()},void i.postMessage(t))}function o(){for(var e=-1,t=0;t<y.length;t++){var n=y[t];if(!n.done&&!n.beingProcessed){e=t;break}}e>=0&&a(e)}function l(){var e=y.every(function(e){return!e.beingProcessed&&e.done});k++,F(.75*k/y.length),e?G||f(y,I):setTimeout(o,1)}function f(e,t){var n,r=[],i={loop:b};null!==g&&null!==p&&(n=p,i.palette=n);var a=new h(r,c,v,i);G=!0,e.forEach(function(t){var r;n||(r=t.palette),F(.75+.25*t.position*1/e.length),a.addFrame(0,0,c,v,t.pixels,{palette:r,delay:x})}),a.end(),F(1),e=[],G=!1,t(r)}var s,d,u,h=e("./omggif").GifWriter,c=t.width||160,v=t.height||120,g=t.dithering||null,p=t.palette||null,w=null,m=null,b=0,x=250,y=[],k=0,I=function(){},F=function(){},_=[],A=[],G=!1;t=t||{},s=t.sampleInterval||10,d=t.numWorkers||2,u=t.workerPath||"Animated_GIF.worker.js";for(var P=0;d>P;P++){var W=new Worker(u);_.push(W),A.push(W)}var B=function(){for(var e=[],t=0;256>t;t++)e[t]=String.fromCharCode(t);return function(t){for(var n=t.length,r="",i=0;n>i;i++)r+=e[t[i]];return r}}();this.setSize=function(e,t){c=e,v=t,w=document.createElement("canvas"),w.width=e,w.height=t,m=w.getContext("2d")},this.setDelay=function(e){x=.1*e},this.setRepeat=function(e){b=e},this.addFrame=function(e){null===m&&this.setSize(c,v),m.drawImage(e,0,0,c,v);var t=m.getImageData(0,0,c,v);this.addFrameImageData(t)},this.addFrameImageData=function(e){var t=(e.length,new Uint8Array(e.data));y.push({data:t,width:e.width,height:e.height,palette:p,dithering:g,done:!1,beingProcessed:!1,position:y.length})},this.onRenderProgress=function(e){F=e},this.isRendering=function(){return G},this.getBase64GIF=function(e){var t=function(t){var n=B(t),r="data:image/gif;base64,"+btoa(n);e(r)};i(t)},this.destroy=function(){_.forEach(function(e){e.terminate()})}}t.exports=n},{"./omggif":3}],2:[function(e){(function(){var t=e("./Animated_GIF");"function"==typeof define&&define.amd?define(function(){return t}):window.Animated_GIF=t}).call(this)},{"./Animated_GIF":1}],3:[function(e,t,n){function r(e,t,n,r){function a(e){var t=e.length;if(2>t||t>256||t&t-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return t}var o=0,r=void 0===r?{}:r,l=void 0===r.loop?null:r.loop,f=void 0===r.palette?null:r.palette;if(0>=t||0>=n||t>65535||n>65535)throw"Width/Height invalid.";e[o++]=71,e[o++]=73,e[o++]=70,e[o++]=56,e[o++]=57,e[o++]=97;var s=0,d=0;if(null!==f){for(var u=a(f);u>>=1;)++s;if(u=1<<s,--s,void 0!==r.background){if(d=r.background,d>=u)throw"Background index out of range.";if(0===d)throw"Background index explicitly passed as 0."}}if(e[o++]=255&t,e[o++]=t>>8&255,e[o++]=255&n,e[o++]=n>>8&255,e[o++]=(null!==f?128:0)|s,e[o++]=d,e[o++]=0,null!==f)for(var h=0,c=f.length;c>h;++h){var v=f[h];e[o++]=v>>16&255,e[o++]=v>>8&255,e[o++]=255&v}if(null!==l){if(0>l||l>65535)throw"Loop count invalid.";e[o++]=33,e[o++]=255,e[o++]=11,e[o++]=78,e[o++]=69,e[o++]=84,e[o++]=83,e[o++]=67,e[o++]=65,e[o++]=80,e[o++]=69,e[o++]=50,e[o++]=46,e[o++]=48,e[o++]=3,e[o++]=1,e[o++]=255&l,e[o++]=l>>8&255,e[o++]=0}var g=!1;this.addFrame=function(t,n,r,l,s,d){if(g===!0&&(--o,g=!1),d=void 0===d?{}:d,0>t||0>n||t>65535||n>65535)throw"x/y invalid.";if(0>=r||0>=l||r>65535||l>65535)throw"Width/Height invalid.";if(s.length<r*l)throw"Not enough pixels for the frame size.";var u=!0,h=d.palette;if((void 0===h||null===h)&&(u=!1,h=f),void 0===h||null===h)throw"Must supply either a local or global palette.";for(var c=a(h),v=0;c>>=1;)++v;c=1<<v;var p=void 0===d.delay?0:d.delay,w=void 0===d.disposal?0:d.disposal;if(0>w||w>3)throw"Disposal out of range.";var m=!1,b=0;if(void 0!==d.transparent&&null!==d.transparent&&(m=!0,b=d.transparent,0>b||b>=c))throw"Transparent color index.";if((0!==w||m||0!==p)&&(e[o++]=33,e[o++]=249,e[o++]=4,e[o++]=w<<2|(m===!0?1:0),e[o++]=255&p,e[o++]=p>>8&255,e[o++]=b,e[o++]=0),e[o++]=44,e[o++]=255&t,e[o++]=t>>8&255,e[o++]=255&n,e[o++]=n>>8&255,e[o++]=255&r,e[o++]=r>>8&255,e[o++]=255&l,e[o++]=l>>8&255,e[o++]=u===!0?128|v-1:0,u===!0)for(var x=0,y=h.length;y>x;++x){var k=h[x];e[o++]=k>>16&255,e[o++]=k>>8&255,e[o++]=255&k}o=i(e,o,2>v?2:v,s)},this.end=function(){return g===!1&&(e[o++]=59,g=!0),o}}function i(e,t,n,r){function i(n){for(;h>=n;)e[t++]=255&c,c>>=8,h-=8,t===o+256&&(e[o]=255,o=t++)}function a(e){c|=e<<h,h+=u,i(8)}e[t++]=n;var o=t++,l=1<<n,f=l-1,s=l+1,d=s+1,u=n+1,h=0,c=0,v=r[0]&f,g={};a(l);for(var p=1,w=r.length;w>p;++p){var m=r[p]&f,b=v<<8|m,x=g[b];if(void 0===x){for(c|=v<<h,h+=u;h>=8;)e[t++]=255&c,c>>=8,h-=8,t===o+256&&(e[o]=255,o=t++);4096===d?(a(l),d=s+1,u=n+1,g={}):(d>=1<<u&&++u,g[b]=d++),v=m}else v=x}return a(v),a(s),i(1),o+1===t?e[o]=0:(e[o]=t-o-1,e[t++]=0),t}function a(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||57!==e[t++]||97!==e[t++])throw"Invalid GIF 89a header.";{var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],a=i>>7,l=7&i,f=1<<l+1;e[t++]}e[t++];var s=null;a&&(s=t,t+=3*f);var d=null,u=!0,h=[],c=0,v=null,g=0,d=null;for(this.width=n,this.height=r;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,d=e[t++]|e[t++]<<8,t++;else for(t+=12;;){var p=e[t++];if(0===p)break;t+=p}break;case 249:if(4!==e[t++]||0!==e[t+4])throw"Invalid graphics extension block.";var w=e[t++];c=e[t++]|e[t++]<<8,v=e[t++],0===(1&w)&&(v=null),g=w>>2&7,t++;break;case 254:for(;;){var p=e[t++];if(0===p)break;t+=p}break;default:throw"Unknown graphic control label: 0x"+e[t-1].toString(16)}break;case 44:var m=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,k=e[t++],I=k>>7,F=7&k,_=1<<F+1,A=s,G=!1;if(I){var G=!0;A=t,t+=3*_}var P=t;for(t++;;){var p=e[t++];if(0===p)break;t+=p}h.push({x:m,y:b,width:x,height:y,has_local_palette:G,palette_offset:A,data_offset:P,data_length:t-P,transparent_index:v,delay:c,disposal:g});break;case 59:u=!1;break;default:throw"Unknown gif block: 0x"+e[t-1].toString(16)}this.numFrames=function(){return h.length},this.frameInfo=function(e){if(0>e||e>=h.length)throw"Frame index out of range.";return h[e]},this.decodeAndBlitFrameBGRA=function(t,r){var i=this.frameInfo(t),a=i.width*i.height,l=new Uint8Array(a);o(e,i.data_offset,l,a);var f=i.palette_offset,s=i.transparent_index;null===s&&(s=256);for(var d=4*(n-i.width),u=4*(i.y*n+i.x),h=i.width,c=0,v=l.length;v>c;++c){var g=l[c];if(g===s)u+=4;else{var p=e[f+3*g],w=e[f+3*g+1],m=e[f+3*g+2];r[u++]=m,r[u++]=w,r[u++]=p,r[u++]=255}0===--h&&(u+=d,h=i.width)}},this.decodeAndBlitFrameRGBA=function(t,r){var i=this.frameInfo(t),a=i.width*i.height,l=new Uint8Array(a);o(e,i.data_offset,l,a);var f=0,s=i.palette_offset,d=i.transparent_index;null===d&&(d=256);for(var u=4*(n-i.width),f=4*(i.y*n+i.x),h=i.width,c=0,v=l.length;v>c;++c){var g=l[c];if(g===d)f+=4;else{var p=e[s+3*g],w=e[s+3*g+1],m=e[s+3*g+2];r[f++]=p,r[f++]=w,r[f++]=m,r[f++]=255}0===--h&&(f+=u,h=i.width)}}}function o(e,t,n,r){for(var i=e[t++],a=1<<i,o=a+1,l=o+1,f=i+1,s=(1<<f)-1,d=0,u=0,h=0,c=e[t++],v=new Int32Array(4096),g=null;;){for(;16>d&&0!==c;)u|=e[t++]<<d,d+=8,1===c?c=e[t++]:--c;if(f>d)break;var p=u&s;if(u>>=f,d-=f,p!==a){if(p===o)break;for(var w=l>p?p:g,m=0,b=w;b>a;)b=v[b]>>8,++m;var x=b,y=h+m+(w!==p?1:0);if(y>r)return void console.log("Warning, gif stream longer than expected.");n[h++]=x,h+=m;var k=h;for(w!==p&&(n[h++]=x),b=w;m--;)b=v[b],n[--k]=255&b,b>>=8;null!==g&&4096>l&&(v[l++]=g<<8|x,l>=s+1&&12>f&&(++f,s=s<<1|1)),g=p}else l=o+1,f=i+1,s=(1<<f)-1,g=null}return h!==r&&console.log("Warning, gif stream shorter than expected."),n}try{n.GifWriter=r,n.GifReader=a}catch(l){}},{}]},{},[2]);